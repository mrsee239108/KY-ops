<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="ai-chat-title">AI æ™ºèƒ½åŠ©æ‰‹ - ä¼ä¸šè¿ç»´ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/ai_chat.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Markdownæ¸²æŸ“åº“ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.3.0/marked.min.js"></script>
    <!-- ä»£ç é«˜äº®åº“ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
</head>
<body>
    <div id="alertNotification-container"></div>
    <div class="window">
    <!-- çª—å£æ ‡é¢˜æ  -->
    <div class="title-bar">
        <div class="title-bar-left">
            <i class="fas fa-robot"></i> <!-- AI ä¸“å±å›¾æ ‡ -->
            <span data-i18n="ai-chat-current-title">AI æ™ºèƒ½åŠ©æ‰‹</span>
        </div>
        <div class="title-bar-right">
            <div class="window-controls">
                <!-- ä¸»é¢˜åˆ‡æ¢æŒ‰é’® -->
                <button class="control-btn theme-toggle" id="theme-toggle-btn" title="" data-i18n-title="ai-chat-theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
                <!-- åˆ·æ–°æŒ‰é’® -->
                <button class="control-btn refresh" onclick="refreshPage()" title="" data-i18n-title="ai-chat-refresh">
                    <i class="fas fa-sync-alt"></i>
                </button>
                <!-- è¿”å›æŒ‰é’® -->
                <button class="control-btn back" onclick="goBack()" title="" data-i18n-title="ai-chat-back">
                    <i class="fas fa-arrow-left"></i> 
                </button>
            </div>
        </div>
    </div>

        <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
        <div class="main-content">
            <!-- ä¾§è¾¹æ  -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <h3><i class="fas fa-comments"></i> <span data-i18n="ai-chat-conversation-management">å¯¹è¯ç®¡ç†</span></h3>
                </div>
                
                <!-- æ–°å»ºå¯¹è¯æŒ‰é’® -->
                <button class="new-chat-btn" onclick="aiChat && aiChat.newConversation()">
                    <i class="fas fa-plus"></i>
                    <span data-i18n="ai-chat-new-conversation">æ–°å»ºå¯¹è¯</span>
                </button>

                <!-- å¯¹è¯å†å² -->
                <div class="chat-history">
                    <div class="history-header">
                        <span data-i18n="ai-chat-conversation-history">å¯¹è¯å†å²</span>
                        <button class="clear-history-btn" onclick="aiChat && aiChat.clearHistory()">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <div class="history-list" id="history-list">
                        <!-- å†å²å¯¹è¯é¡¹ç›®å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>

                <!-- å¿«æ·åŠŸèƒ½ -->
                <div class="quick-actions">
                    <div class="action-header">
                        <span data-i18n="ai-chat-quick-functions">å¿«æ·åŠŸèƒ½</span>
                    </div>
                    <div class="action-buttons">
                        <button class="action-btn" onclick="aiChat && aiChat.generateQuery('system-check')">
                            <i class="fas fa-desktop"></i>
                            <span data-i18n="ai-chat-system-check">ç³»ç»Ÿæ£€æŸ¥</span>
                        </button>
                        <button class="action-btn" onclick="aiChat && aiChat.generateQuery('performance-analysis')">
                            <i class="fas fa-chart-line"></i>
                            <span data-i18n="ai-chat-performance-analysis">æ€§èƒ½åˆ†æ</span>
                        </button>
                        <button class="action-btn" onclick="aiChat && aiChat.generateQuery('security-scan')">
                            <i class="fas fa-shield-alt"></i>
                            <span data-i18n="ai-chat-security-scan">å®‰å…¨æ‰«æ</span>
                        </button>
                        <button class="action-btn" onclick="aiChat && aiChat.generateQuery('log-analysis')">
                            <i class="fas fa-file-alt"></i>
                            <span data-i18n="ai-chat-log-analysis">æ—¥å¿—åˆ†æ</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- èŠå¤©åŒºåŸŸ -->
            <div class="chat-area">
                <!-- èŠå¤©å¤´éƒ¨ -->
                <div class="chat-header">
                    <div class="chat-title">
                        <h2 id="current-chat-title" data-i18n="ai-chat-current-title">AI æ™ºèƒ½åŠ©æ‰‹</h2>
                        <span class="chat-subtitle" id="current-chat-subtitle" data-i18n="ai-chat-current-subtitle">éšæ—¶ä¸ºæ‚¨æä¾›ä¸“ä¸šçš„è¿ç»´æ”¯æŒ</span>
                    </div>
                    <div class="chat-actions">
                        <button class="action-btn" onclick="aiChat && aiChat.exportChat()" title="" data-i18n-title="ai-chat-export-conversation">
                            <i class="fas fa-download"></i>
                            <span data-i18n="ai-chat-export-conversation">å¯¼å‡ºå¯¹è¯</span>
                        </button>
                        <button class="action-btn" onclick="aiChat && aiChat.shareChat()" title="" data-i18n-title="ai-chat-share">
                            <i class="fas fa-share"></i>
                            <span data-i18n="ai-chat-share">åˆ†äº«</span>
                        </button>
                    </div>
                </div>

                <!-- æ¶ˆæ¯å®¹å™¨ -->
                <div class="messages-container" id="messages-container">
                    <!-- æ¬¢è¿æ¶ˆæ¯ -->
                    <div class="welcome-message">
                        <div class="ai-avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="welcome-content">
                            <h3 data-i18n="ai-chat-welcome-title">ğŸ‘‹ æ¬¢è¿ä½¿ç”¨ AI æ™ºèƒ½åŠ©æ‰‹</h3>
                            <p data-i18n="ai-chat-welcome-intro">æˆ‘æ˜¯æ‚¨çš„ä¸“ä¸šè¿ç»´åŠ©æ‰‹ï¼Œå¯ä»¥å¸®åŠ©æ‚¨ï¼š</p>
                            <ul>
                                <li data-i18n="ai-chat-welcome-feature-1">ğŸ” ç³»ç»Ÿæ€§èƒ½ç›‘æ§ä¸åˆ†æ</li>
                                <li data-i18n="ai-chat-welcome-feature-2">ğŸ›¡ï¸ å®‰å…¨å¨èƒæ£€æµ‹ä¸å¤„ç†</li>
                                <li data-i18n="ai-chat-welcome-feature-3">ğŸ“Š æ•°æ®åˆ†æä¸æŠ¥å‘Šç”Ÿæˆ</li>
                                <li data-i18n="ai-chat-welcome-feature-4">ğŸ”§ æ•…éšœè¯Šæ–­ä¸è§£å†³æ–¹æ¡ˆ</li>
                                <li data-i18n="ai-chat-welcome-feature-5">ğŸ“š æŠ€æœ¯æ–‡æ¡£ä¸æœ€ä½³å®è·µ</li>
                            </ul>
                            <p data-i18n="ai-chat-welcome-prompt">è¯·è¾“å…¥æ‚¨çš„é—®é¢˜ï¼Œæˆ‘å°†ä¸ºæ‚¨æä¾›ä¸“ä¸šçš„å¸®åŠ©ï¼</p>
                        </div>
                    </div>
                </div>

                <!-- è¾“å…¥åŒºåŸŸ -->
                <div class="input-area">
                    <div class="input-container">
                        <div class="input-wrapper">
                            <textarea 
                                id="message-input" 
                                placeholder="è¯·è¾“å…¥æ‚¨çš„é—®é¢˜..."
                                data-i18n-placeholder="ai-chat-input-placeholder"
                                rows="1"
                                maxlength="5000"
                            ></textarea>
                            <div class="input-actions">
                                <button class="send-btn" id="send-btn" onclick="aiChat && aiChat.sendMessage()">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                        <div class="input-footer">
                            <div class="char-count">
                                <span id="char-count">0</span>/5000
                            </div>
                            <div class="input-tips">
                                <span data-i18n="ai-chat-input-tips">æŒ‰ Ctrl+Enter å‘é€æ¶ˆæ¯</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- åŠ è½½æŒ‡ç¤ºå™¨ -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <span data-i18n="ai-chat-loading-text">AI æ­£åœ¨æ€è€ƒä¸­...</span>
        </div>
    </div>





    <script src="{{ url_for('static', filename='js/theme-manager.js') }}"></script>
     <script src="{{ url_for('static', filename='js/language-manager.js') }}"></script>
     <script src="{{ url_for('static', filename='js/ai_chat.js') }}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–ä¸»é¢˜ç®¡ç†å™¨
            window.themeManager = new ThemeManager();
            // åˆå§‹åŒ–è¯­è¨€ç®¡ç†å™¨
            if (typeof LanguageManager !== 'undefined') {
                window.languageManager = new LanguageManager();
                window.languageManager.init();
            }
        });
    </script>
</body>
</html>
